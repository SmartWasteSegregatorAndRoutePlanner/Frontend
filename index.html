<!DOCTYPE html>
<html lang="en">

<head>
    <title> Waste segregator - Final year Project </title>

    <meta charset="utf-8">
    <meta name="Description"
        content="Waste segregator is a simple prototype to segregate wastes into different types at the source of the waste itself and then differentiate and let it go its disposal sites.">

    <!--BOOTSTRAP CDN-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <!--TAILWIND CSS CDN-->

    <!--FAVICON-->
    <link rel="icon" type="image/x-icon" href="/images/landing-1">

    <!--EXTERNAL STYLE LINKS-->
    <link rel="stylesheet" href="/style.css">

    <!-- CUSTOM JS scripts -->
    <script type="text/javascript" src="/script.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <!--FOOTER-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.bundle.min.js"></script>

</head>

<body>
    <div class="college-logo-section">
        <br><br><br><br><br>
        <div class="row">
            <div class="col-md-5 college-logo">
                <img src="/assets/images/logo.jpeg" class="align-right" height="80%" width="80%" alt="college-logo"/>
                <p><b>SHREE L.R TIWARI COLLEGE OF ENGINEERING</b><br>Kanakia Park, Mira Road - East<p> 
            </div>
            <div class="col-md-1"></div> 
            <div class="col-md-6">
                <h2 class="align-justify project-title">Project - Waste Segregation using Smart Robotic Arm and Route Planning System</h2>
                <br><br>

                <h3 class="align-left guide-name"> Guide - Prof. Shruti Patil</h3><br>

                <h4 class="align-left team-members">
                    <ol class="align-left"> Team Members <br>
                        <li>Rahul Gupta - Team Leader - 12 </li>
                        <li>Dhrumil Mistry - 26 </li>
                        <li>LSD Priyanka Peddinti - 36 </li>
                        <li>Shubh Kansara - 18 </li>
                    </ol>
                </h4>

            </div>
        </div>
        <br><br><br>
    </div>

    <nav class="navbar top" height="40rem">
        <div class="title">&nbsp;&nbsp;<b><em></em></b></div>
        <p class="muted-text"></p>
        <a href="#" class="toggle-button">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </a>
        <div class="navbar-links">
            <ul>
                <li><a href="#landing-page-1" target="_blank">Home</a></li>
                <li><a href="#data-analysis" target="_self">Analytics</a></li>
                <li><a href="#route-planner" target="_self">Map</a></li>
                
            </ul>
        </div>
    </nav>

    <div class="landing-page-1">
        <div class="row">
            <div class="col-md-5">

            <h1>Smart Waste segregation, disposal & Route Planner</h1>
            <br><br><br><br><br>
            <br><br><br><br><br>
            <h3>
                <ul>  <br><br>
                    <li>* Segregate waste at source </li>
                    <li>* Data on waste generation</li>
                    <li>* Highly optimised route planner for garbage collection vans</li>
                </ul>
            </h3>
            </div>

            <div class="col-md-1"></div>

            <div class="col-md-6 landing-i1">
                <img src="./assets/images/landing-1.JPG" class="rounded 4 pc" height="500" width="570">
            </div>
        </div>
    </div>


    <!-- DATA ANALYSSIS OF WASTE SEGREGATION -->
    <div class="section-2 data-analysis">
        <div class="row row featurette">
            <div class="col-md-4"></div>

            <div class="col-md-4">
                <div class="card" style="width: 25rem;">
                    <img src="https://cdn.pixabay.com/photo/2016/11/27/21/42/stock-1863880_960_720.jpg" class="card-img-top" alt="data-card-1" >
                    <div class="data-card-1">
                      <h5 class="data-analysis-title">WASTE ANALYSIS</h5>
                      <p class="data-analysis-description">The waste that gets detected by the camera / conveyor belt while segregation gets classfied on the cloud model that differentiates between different types of waste and then gives data accordingly.</p>
                      <button class="update-data" target="_blank" onclick=" ">Get data!</button>
                    </div>
                </div>
            </div>

            <div class="col-md-4"></div>
        </div>
    </div>
    <br>

    <section class="section-3">
    <!--MAP AND ROUTE PANNER OF GARBAGE VANS-->
    <div class="section-3 route-planner">
        <div class="map-analysis">
            <div class="row row featurette">
                <div class="col-md-4">
                    <div class="card">
                        <img src="https://cdn.pixabay.com/photo/2016/11/25/18/30/tourist-1858958__340.jpg" class="card-img-top" alt="data-card-1" >
                        <div class="data-card-1">
                          <h5 class="map-analysis-title">MAP OF THE ROUTE PLANNER</h5>
                          <p class="map-analysis-description">The waste that has been continously segregated and whose data has been been integrated with the cloud is now available with the local garbage truck drivers of each  kind. <br>
                          Garbage of each type ie - Degradable and non degradable will now be shown to trucks and the   drivers can decide based on the quantity of the waste as to when to pick up at which point and  when to skip</p>
                          
                          <button class="show-map" onclick="getMap()">Show points</button><br><br>
                          <button class="update-map" onclick="updateMap()">Get updated map</button>
                        </div>
                    </div>
                    
                </div>
                <div id="route-viewer" class="col">
                    <div id="route-alert"></div>
                    <div id="route-map" class="my-auto"></div>
                </div>
                
            </div>           
        </div>
    </div>
    </section>

    <script>
         const baseUrl = 'http://localhost:8000/api';
        
        // endpoints
        // authentication
        const loginToken = '/token/';
        const loginRefresh = '/token/refresh/';

        // route-planner
        const routePlanner = '/route-planner/';
        const updateRoutes = '/route-planner/update-routes';


        function getEndpoint(baseUrl, endpoint) {
            return baseUrl + endpoint + '?format=json';
        }

        function updateRouteAlert(alertType, message){
            const routeAlert = document.getElementById("route-alert");
            routeAlert.innerHTML = `<div class='alert alert-${alertType} alert-dismissible fade show' role='alert'>${message}<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button></div>`;
        }

        const api = axios.create({
            timeout: 30000 // in ms
        });

        function getMap() {
            const endpoint = getEndpoint(baseUrl, routePlanner);
            const routeMapTag = document.getElementById("route-map");

            api.get(endpoint)
                .then(function (response) {
                    console.log(response.data);
                    routeMapTag.innerHTML = response.data;
                    updateRouteAlert("success", "Routes Fetched Successfully");
                    return response.data;
                })
                .catch(function (error) {
                    console.error(error);
                    updateRouteAlert("danger", "Failed to fetch updated routes!");
                })
        }

        function updateMap() {
            const endpoint = getEndpoint(baseUrl, updateRoutes);
            updateRouteAlert("warning", "Routes are being calculated, Please wait for few seconds.");
            api.get(endpoint)
                .then(function (response) {
                    console.log(response.data);
                    if (response.status == 201){
                        updateRouteAlert("success", "Routes are ready! Click on Fetch Routes Button to view Routes.");
                    } else {
                        updateRouteAlert("warning", )
                    }
                    return response.data;
                })
                .catch(function (error) {
                    updateRouteAlert("danger", "Failed to calculate routes! View console for more information.");
                    console.error(error);
                })
        }

        function authenticateUser(username, password){
            const endpoint = getEndpoint(baseUrl, loginToken);
            api.post(endpoint, {
                "username": username,
                "password": password
            })
            .then(function (response) {
                console.log(response.data);
                return response.data;
            })
            .catch (function (error){
                console.error(error);
            })
        }

        
        function refreshToken(token){
            const endpoint = getEndpoint(baseUrl, refreshToken);
            api.post(endpoint, {
                "refresh": refreshToken
            })
            .then(function (response) {
                console.log(response.data);
                return response.data;
            })
            .catch (function (error){
                console.error(error);
            })
        }

    </script>
</body>

</html>